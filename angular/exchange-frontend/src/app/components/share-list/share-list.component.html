<h2 class="title">–°–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π</h2>

<div class="search-bar">
  <label>
    –ü–æ–∏—Å–∫ –ø–æ:
    <select [(ngModel)]="filterField" class="input-select">
      <option value="companyName">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</option>
      <option value="companyAddress">–ê–¥—Ä–µ—Å</option>
      <option value="price">–¶–µ–Ω–∞</option>
      <option value="quantityAvailable">–î–æ—Å—Ç—É–ø–Ω–æ</option>
      <option value="controlStakeSize">–ö–æ–Ω—Ç—Ä. –ø–∞–∫–µ—Ç</option>
    </select>
  </label>
  <input [(ngModel)]="filterValue" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞" class="input-text" />
</div>

<div class="form-container" *ngIf="isAdmin">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form">
    <input formControlName="companyName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏" required class="input-text" />
    <input formControlName="companyAddress" placeholder="–ê–¥—Ä–µ—Å" class="input-text" />

    <input
      formControlName="price"
      placeholder="–¶–µ–Ω–∞ (–±–æ–ª—å—à–µ 0)"
      type="number"
      min="1"
      (input)="onNumberInput('price')"
      (keydown)="onKeyDownNoMinus($event)"
      class="input-text"
    />

    <input
      formControlName="quantityAvailable"
      placeholder="–î–æ—Å—Ç—É–ø–Ω–æ (–±–æ–ª—å—à–µ 0)"
      type="number"
      min="1"
      (input)="onNumberInput('quantityAvailable')"
      (keydown)="onKeyDownNoMinus($event)"
      class="input-text"
    />

    <input
      formControlName="controlStakeSize"
      placeholder="–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç (%)"
      type="number"
      min="1"
      max="100"
      (input)="onNumberInput('controlStakeSize')"
      (keydown)="onKeyDownNoMinus($event)"
      class="input-text"
    />

    <button type="submit" [disabled]="form.invalid" class="btn primary-btn">
      {{ editingShare ? '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å' : '–î–æ–±–∞–≤–∏—Ç—å' }}
    </button>
    <button type="button" *ngIf="editingShare" (click)="cancelEdit()" class="btn cancel-btn">–û—Ç–º–µ–Ω–∞</button>
  </form>
</div>

<table class="data-table">
  <thead>
  <tr>
    <th>–ö–æ–º–ø–∞–Ω–∏—è</th>
    <th>–ê–¥—Ä–µ—Å</th>
    <th>–¶–µ–Ω–∞</th>
    <th>–î–æ—Å—Ç—É–ø–Ω–æ</th>
    <th>–ö–æ–Ω—Ç—Ä. –ø–∞–∫–µ—Ç</th>
    <th *ngIf="isAdmin">–î–µ–π—Å—Ç–≤–∏—è</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let share of filteredShares()">
    <td>{{ share.companyName }}</td>
    <td>{{ share.companyAddress }}</td>
    <td>{{ share.price | number:'1.2-2' }}</td>
    <td>{{ share.quantityAvailable }}</td>
    <td>{{ share.controlStakeSize }}%</td>
    <td *ngIf="isAdmin" class="actions-cell">
      <button (click)="startEdit(share)" class="btn action-btn edit-btn">‚úèÔ∏è</button>
      <button (click)="deleteShare(share)" class="btn action-btn delete-btn">üóëÔ∏è</button>
    </td>
  </tr>
  </tbody>
</table>
